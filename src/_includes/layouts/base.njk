<!DOCTYPE html>
<html lang="{{ lang if lang else defaultLanguage }}-CA" dir="ltr">
<head>
  {% include 'partials/global/meta.njk' %}
  <link rel="manifest" id="manifest-placeholder">
  <script>
    const language = "{{ lang }}";
    let manifestUrl = "";

    if (language == "fr") {
      manifestUrl = "/manifest-fr.json"
    };

    if (!manifestUrl) manifestUrl = "/manifest-en.json";
    document.querySelector('#manifest-placeholder').setAttribute('href', manifestUrl);
  </script>
  <title>{{ title | renderContent("md") | striptags | safe }}</title>
  {% include "partials/global/stylesheets.njk" %}
{% include "partials/global/scripts.njk" %}
  {% getBundle "fontawesome" %}
</head>
<body class="page {{ bodyClass if bodyClass else '' }}">
  {% uioTemplate %}
  {% include "partials/global/header.njk" %}
  {% include "partials/components/navigation.njk" %}
  <main id="main" class="{{ pageType if pageType else 'page' }}">
    {% block banner %}
    <div class="title">
      <div class="wrapper">
        <div class="flow">
          <h1>{{ title | renderContent("md") | safe }}</h1>
        </div>
      </div>
    </div>
    {% endblock %}
    {% block content %}
    <article>
      <div class="wrapper flow">
      {{ content | safe }}
      </div>
    </article>
    {% endblock %}
    </div>
  </main>
  {% include "partials/global/footer.njk" %}
  {% uioCustomInit lang, supportedLanguages[lang].dir %}

  <script type="module">
    class ReversedList extends HTMLElement {
      static tagName = "reversed-list";

      constructor() {
          super();

          this._init = this._init.bind(this);
      }

      connectedCallback() {
          if (this.children.length) {
            this._init();
          }
        }

      _init() {
          this.ol = this.querySelector('ol');

          if (this.ol) {
            this.ol.setAttribute("reversed", true);
          }
      }
    }

    window.customElements.define(ReversedList.tagName, ReversedList);
  </script>
</body>
</html>
